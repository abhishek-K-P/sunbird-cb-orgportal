<div class="add-competency">
  <h4 class="ws-mat-primary-text font-weight-bold margin-remove">
    <div class="flex flex-between flex-baseline p-5">
      <span class="mat-h2 margin-remove add-competency-header" i18n>Add Competency</span>
      <button mat-icon-button color="primary" class="text-middle close-button margin-remove" (click)="closeDialog()">
        <mat-icon class="">clear</mat-icon>
      </button>
    </div>
  </h4>
  <hr>
  <div class="content-section">
    <div class="mt-4 flex justify-between px-5">
      <div class="form-controls mat-full-radius w-full">
        <mat-form-field appearance="outline">
          <input matInput placeholder="Type here to search themes" [formControl]="searchControl" maxlength="70">
        </mat-form-field>
      </div>
    </div>
    <div class="mt-4 px-5">
      <div class="themes-header">Themes</div>
      <div class="themes-container mt-4">
        <ng-container *ngFor="let theme of filteredThemes; let i = index">
          <div [ngClass]="{'disableChip': theme?.preSelected}" class="chip-themes {{theme.checked ? 'active' : ''}}"
            (click)="selectTheme(i)">
            <label class="theme-name mr-2">
              {{ theme.name }}
            </label>
            <mat-checkbox [checked]="theme?.selected" (click)="$event.preventDefault()"
              [disabled]="theme?.preSelected"></mat-checkbox>
          </div>
        </ng-container>
        <a (click)="toggleThemes()" class="see-more">{{themesShowMore ? 'See Less' : 'See More'}}</a>
      </div>
    </div>
    <ng-container *ngIf="selectedThemesList?.length">
      <div class="mt-8 px-5">
        <div class="themes-header">Add Sub Themes</div>
        <ng-container *ngFor="let selectedTheme of selectedThemesList ">
          <div class="themes-header mt-5">{{selectedTheme.name}}</div>
          <div class="themes-container mt-2">
            <ng-container *ngFor="let subTheme of selectedTheme.associations; let i = index">
              <div [ngClass]="{'disableChip': subTheme?.preSelected}"
                class="chip-themes {{subTheme.checked ? 'active' : ''}}"
                (click)="selectSubTheme(subTheme, selectedTheme)">
                <label class="theme-name">
                  {{ subTheme.name }}
                  <mat-checkbox [checked]="subTheme?.selected" (click)="$event.preventDefault()"
                    [disabled]="subTheme?.preSelected"></mat-checkbox>
                </label>
              </div>
            </ng-container>
          </div>
        </ng-container>
      </div>
    </ng-container>
  </div>
  <hr class="mt-4">
  <div class="footer-section flex justify-end px-5 mt-4">
    <div class="flex gap-4 action-buttons-cfq">
      <button mat-button (click)="closeDialog()" class="cancel-btn cursor-pointer">
        Cancel
      </button>
      <button [ngClass]="{'disableAdd' : !canAddCompetencies, 'enable-btn' : canAddCompetencies}"
        class="flex items-center cursor-pointer add-btn" (click)="saveCompetencies()" mat-button>
        Add
      </button>
    </div>
  </div>
</div>