<div class="w-full flex flex-column events">
  <div class="breadcrum flex items-center justify-between">
    <div class="flex gap-2 items-center">
      <mat-icon class="back-arrow" (click)="navigateBack()">arrow_back</mat-icon>
      <span class="event-text">Event</span>
      <mat-icon class="chevron-arrow">chevron_right</mat-icon>
      <span class="event-builder-text">Event Builder</span>
    </div>
    <div class="flex gap-4">
      <ng-container *ngIf="openMode === 'edit'">
        <button mat-raised-button class="flex justify-center items-center save-and-exit" (click)="saveAndExit()">Save
          Draft & Exit</button>
      </ng-container>
      <ng-container *ngIf="currentStepperIndex !== 3">
        <button mat-raised-button class="flex justify-center items-center next-btn"
          (click)="moveToNextForm()">Next</button>
      </ng-container>
      <ng-container *ngIf="!showPreview && currentStepperIndex === 3">
        <button mat-raised-button class="flex items-center publish-btn" (click)="preview()">Preview</button>
      </ng-container>
      <ng-container *ngIf="showPreview && showPublish">
        <button mat-raised-button class="flex items-center publish-btn" (click)="publish()">Send to Publisher</button>
      </ng-container>
    </div>
  </div>

  <mat-stepper labelPosition="bottom" [selectedIndex]="currentStepperIndex"
    (selectionChange)="onSelectionChange($event)" class="mx-10" #stepper>
    <mat-step [stepControl]="eventDetailsForm">
      <ng-template matStepLabel>Basic Details</ng-template>
      <ws-app-event-basic-details [eventDetails]="eventDetailsForm" [openMode]="openMode"
        [userProfile]="userProfile"></ws-app-event-basic-details>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Add Speaker</ng-template>
      <ws-app-speakers [speakersList]="speakersList" [openMode]="openMode"
        [userProfile]="userProfile"></ws-app-speakers>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Add Material</ng-template>
      <ws-app-event-materials [materialsList]="materialsList" [openMode]="openMode"></ws-app-event-materials>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Add Competency</ng-template>
      <ng-container *ngIf="showPreview; else add_competencies">
        <ws-app-events-preview [event]="updatedEventDetails"></ws-app-events-preview>
      </ng-container>
      <ng-template #add_competencies>
        <ws-app-event-competencies [competenciesList]="competencies" [openMode]="openMode"
          (addCompetencies)="addCompetencies($event)"></ws-app-event-competencies>
      </ng-template>
    </mat-step>
  </mat-stepper>
</div>